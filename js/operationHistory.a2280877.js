"use strict";(self["webpackChunkh5_u2"]=self["webpackChunkh5_u2"]||[]).push([[353],{8859:function(e,t,a){var l=a(4311),n=a(6629);const o={baseURL:location.origin,timeout:5e3},p=l.Z.create(o);p.interceptors.request.use((function(e){return"get"===e.method&&"/api/login"!==e.url&&(localStorage.getItem("os-token")?(e.params||(e.params={}),Object.assign(e.params,{token:localStorage.getItem("os-token")})):((0,n.z8)({message:"请先登录",type:"warning"}),localStorage.clear())),e}),(function(e){return Promise.reject(e)})),p.interceptors.response.use((function(e){return 1===e.data.ret&&(0,n.z8)({message:"请先登录",type:"warning"}),e.data}),(function(e){return Promise.reject(e)})),t["Z"]=p},2648:function(e,t,a){a.d(t,{Gh:function(){return u},WU:function(){return n},XF:function(){return o},ax:function(){return p},c$:function(){return l},w6:function(){return i}});a(7658);function l(e=0,t=new Date,a=new Date){t.setDate(t.getDate()-e),a.setDate(a.getDate()+e);var l=[],n=[],o=["日","一","二","三","四","五","六"],p=0;while(a.getTime()-t.getTime()>=0){p++;var r=1==(t.getMonth()+1).toString().length?"0"+(t.getMonth()+1).toString():t.getMonth()+1,u=1==t.getDate().toString().length?"0"+t.getDate():t.getDate(),i=o[t.getDay()];n.push(r+"月"+u+"日（周"+i+"）");var d={};d.week=1==p?"今天":"周"+i,d.date=(new Date).getFullYear()+"-"+r+"-"+u,d.date2=r+"-"+u,l.push(d),t.setDate(t.getDate()+1)}return l}function n(e){return e.map((e=>({title:e.date.slice(5),dataKey:e.date,key:e.date,width:60})))}function o(e,t){var a=new Array,l=0;while(e<=t){a[l]=e;var n=new Date(e).getTime(),o=n+864e5,p=new Date(o).getFullYear()+"-",r=new Date(o).getMonth()+1<10?"0"+(new Date(o).getMonth()+1)+"-":new Date(o).getMonth()+1+"-",u=new Date(o).getDate()<10?"0"+new Date(o).getDate():new Date(o).getDate();e=p+r+u,l++}return a[0]=a[0].slice(0,10),a}function p(e){return r(e)}function r(e){var t=new Date;t.setDate(t.getDate()-e);var a=t.getFullYear(),l=t.getMonth()+1,n=t.getDate(),o=t.getHours(),p=t.getMinutes(),r=t.getSeconds();return[a,"-",l<10?`0${l}`:l,"-",n<10?`0${n}`:n," ",o<10?`0${o}`:o,":",p<10?`0${p}`:p,":",r<10?`0${r}`:r].join("")}function u(e){return new Function("return "+e)()}function i(e){let[t,a]=e.split("-");t=parseInt(t),a=parseInt(a);let l=a-t+1,n=t-1;return Array.apply(null,{length:l}).map(((e,t)=>(n++,n)))}},5830:function(e,t,a){a.d(t,{Z:function(){return c}});var l=a(3396),n=a(7139),o=a(4870);a(2648);const p=e=>((0,l.dD)("data-v-79ac3e0f"),e=e(),(0,l.Cn)(),e),r=p((()=>(0,l._)("p",null,"请输入你想要删除的数量",-1))),u={style:{"text-align":"right",margin:"0"}};var i={__name:"Table",props:{data:{type:Array,require:!0},columns:{type:Array,require:!0},page:Boolean,total:Number},emits:["changePage"],setup(e,{emit:t}){const a=e,p=(0,o.iH)([]);(0,l.YP)((()=>a.data),(e=>{"expand"==a.columns[0].type&&(p.value=e.map((e=>{if(e.paramStr){if(5==e.type){const t=JSON.parse(e.paramStr);return t.uidList=e.uidList||e.uid,[t]}return[JSON.parse(e.paramStr)]}})))}));const i=(0,o.iH)(null),d=(0,o.iH)([]),s=(0,o.iH)(1),c=e=>{t("changePage",e)},m=()=>{d.value=[]};return(t,o)=>{const g=(0,l.up)("el-input-number"),w=(0,l.up)("el-button"),b=(0,l.up)("el-popover"),f=(0,l.up)("el-space"),y=(0,l.up)("el-table-column"),v=(0,l.up)("el-table"),h=(0,l.up)("el-pagination");return(0,l.wg)(),(0,l.iD)("div",{class:"table",onClick:m},[(0,l.Wm)(v,{ref_key:"table",ref:i,style:{width:"100%"},data:a.data},(0,l.Nv)({_:2},["expand"!=a.columns[0].type?{name:"default",fn:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.columns,(e=>((0,l.wg)(),(0,l.j4)(y,{key:e.prop,prop:e.prop,label:e.label,width:e.width},(0,l.Nv)({_:2},["operation"===e.prop?{name:"default",fn:(0,l.w5)((t=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.operation,((e,a)=>((0,l.wg)(),(0,l.j4)(f,{key:a},{default:(0,l.w5)((()=>["删除"===e.text?((0,l.wg)(),(0,l.j4)(b,{key:0,visible:d.value[t.$index],placement:"top",width:160,trigger:"hover"},{reference:(0,l.w5)((()=>[(0,l.Wm)(w,{size:"small",type:e.type,onClick:e=>{s.value=1,d.value[t.$index]=!0}},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.text),1)])),_:2},1032,["type","onClick"])])),default:(0,l.w5)((()=>[r,(0,l.Wm)(g,{placeholder:"请输入数量",modelValue:s.value,"onUpdate:modelValue":o[0]||(o[0]=e=>s.value=e),min:1,size:"small"},null,8,["modelValue"]),(0,l._)("div",u,[(0,l.Wm)(w,{size:"small",text:"",onClick:e=>d.value[t.$index]=!1},{default:(0,l.w5)((()=>[(0,l.Uk)("取消")])),_:2},1032,["onClick"]),(0,l.Wm)(w,{size:"small",type:"primary",onClick:a=>{e.onClick(t.row,t.$index,s.value),d.value[t.$index]=!1}},{default:(0,l.w5)((()=>[(0,l.Uk)("确认")])),_:2},1032,["onClick"])])])),_:2},1032,["visible"])):(0,l.kq)("",!0)])),_:2},1024)))),128))])),key:"0"}:void 0]),1032,["prop","label","width"])))),128))])),key:"0"}:{name:"default",fn:(0,l.w5)((()=>[(0,l.Wm)(y,{type:"expand",width:50},{default:(0,l.w5)((e=>[(0,l.Wm)(v,{data:p.value[e.$index]},{default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.columns[0].cols[e?.row?.type-1],(e=>((0,l.wg)(),(0,l.j4)(y,{key:e.prop,prop:e.prop,label:e.label,width:e.width},null,8,["prop","label","width"])))),128))])),_:2},1032,["data"])])),_:1}),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.columns.slice(1),(e=>((0,l.wg)(),(0,l.j4)(y,{key:e.prop,prop:e.prop,label:e.label,width:e.width},(0,l.Nv)({_:2},["operation"===e.prop?{name:"default",fn:(0,l.w5)((t=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.operation,((e,a)=>((0,l.wg)(),(0,l.j4)(f,{key:a},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{size:"small",onClick:a=>e.onClick(t.row,t.$index),type:e.type},{default:(0,l.w5)((()=>[(0,l.Uk)((0,n.zw)(e.text),1)])),_:2},1032,["onClick","type"])])),_:2},1024)))),128))])),key:"0"}:void 0]),1032,["prop","label","width"])))),128))])),key:"1"}]),1032,["data"]),e.page?((0,l.wg)(),(0,l.j4)(h,{key:0,layout:"prev, pager, next",total:e.total||0,background:"",onCurrentChange:c},null,8,["total"])):(0,l.kq)("",!0)])}}},d=a(89);const s=(0,d.Z)(i,[["__scopeId","data-v-79ac3e0f"]]);var c=s},8981:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var l=a(3396),n=a(4870),o=a(5830),p=[[{prop:"coinID",label:"货币ID"},{prop:"name",label:"名称"},{prop:"nums",label:"数量"},{prop:"num",label:"操作数量"}],[{prop:"DescId",label:"英雄ID"},{prop:"SerialNum",label:"唯一ID"},{prop:"nickname",label:"称号"},{prop:"Star",label:"品质"},{prop:"Level",label:"等级"},{prop:"SuperEvolve",label:"是否超进化"},{prop:"SuperEvolveLevel",label:"超进化等级"},{prop:"TempWeaponLevel",label:"专武等级"},{prop:"num",label:"操作数量"}],[{prop:"Id",label:"背包道具ID"},{prop:"name",label:"名称"},{prop:"Count",label:"数量"},{prop:"num",label:"操作数量"}],[{prop:"DescId",label:"背包装备ID"},{prop:"SerialNum",label:"唯一ID"},{prop:"name",label:"名称"},{prop:"State",label:"品质"},{prop:"Level",label:"强化等级"},{prop:"num",label:"操作数量"}],[{prop:"uidList",label:"uidList"},{prop:"opId",label:"opId"}]],r=a(8859);a(9564);const u={class:"hero"};var i={__name:"operationHistory",setup(e){const t={1:"删除",2:"新增"},a={1:"货币",2:"英雄",3:"背包道具",4:"背包装备",5:"vip活动"},i=(0,n.iH)(0),d=(0,n.qj)({uid:"",type:"",opUser:"",opId:""}),s=()=>{c()};(0,l.bv)((async()=>{await c()}));const c=async(e=1)=>{const{data:l,count:n}=await r.Z.get("/api/select_playerop",{params:{pageSize:10,pageIndex:e,uid:d.uid,type:d.type,opUser:d.opUser,opId:d.opId}});i.value=n,g.value=l.map((e=>(e.operationContent=t[e.opType]+"【"+a[e.type]+"】",e)))},m=e=>{c(e)},g=(0,n.iH)([]),w=(0,n.iH)([{type:"expand",cols:p},{prop:"opUser",label:"操作用户"},{prop:"uid",label:"UID"},{prop:"createTime",label:"操作时间"},{prop:"operationContent",label:"操作内容"}]);return(e,t)=>{const a=(0,l.up)("el-input"),p=(0,l.up)("el-form-item"),r=(0,l.up)("el-button"),c=(0,l.up)("el-form");return(0,l.wg)(),(0,l.iD)("div",u,[(0,l.Wm)(c,{inline:!0,model:(0,n.SU)(d),"label-width":"120px"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{label:"uid"},{default:(0,l.w5)((()=>[(0,l.Wm)(a,{placeholder:"请输入uid",modelValue:(0,n.SU)(d).uid,"onUpdate:modelValue":t[0]||(t[0]=e=>(0,n.SU)(d).uid=e),style:{width:"200px"}},null,8,["modelValue"])])),_:1}),(0,l.Wm)(p,{label:"操作类型"},{default:(0,l.w5)((()=>[(0,l.Wm)(a,{placeholder:"请输入操作类型",modelValue:(0,n.SU)(d).type,"onUpdate:modelValue":t[1]||(t[1]=e=>(0,n.SU)(d).type=e),style:{width:"200px"}},null,8,["modelValue"])])),_:1}),(0,l.Wm)(p,{label:"操作人员账号"},{default:(0,l.w5)((()=>[(0,l.Wm)(a,{placeholder:"请输入操作人员账号",modelValue:(0,n.SU)(d).opUser,"onUpdate:modelValue":t[2]||(t[2]=e=>(0,n.SU)(d).opUser=e),style:{width:"200px"}},null,8,["modelValue"])])),_:1}),(0,l.Wm)(p,{label:"操作物品ID"},{default:(0,l.w5)((()=>[(0,l.Wm)(a,{placeholder:"请输入操作物品ID",modelValue:(0,n.SU)(d).opId,"onUpdate:modelValue":t[3]||(t[3]=e=>(0,n.SU)(d).opId=e),style:{width:"200px"}},null,8,["modelValue"])])),_:1}),(0,l.Wm)(p,null,{default:(0,l.w5)((()=>[(0,l.Wm)(r,{type:"primary",onClick:s},{default:(0,l.w5)((()=>[(0,l.Uk)("搜索")])),_:1})])),_:1})])),_:1},8,["model"]),(0,l.Wm)(o.Z,{data:(0,n.SU)(g),columns:(0,n.SU)(w),page:"",total:(0,n.SU)(i),onChangePage:m},null,8,["data","columns","total"])])}}},d=a(89);const s=(0,d.Z)(i,[["__scopeId","data-v-19588a68"]]);var c=s}}]);
//# sourceMappingURL=operationHistory.a2280877.js.map